---
import { LangSelector, SwitchScheme } from "@/components/index.astro"
import Nav from "./Nav.astro"

const activeClass = "[.active&]:opacity-100 [.active&]:translate-y-0 [.active&]:pointer-events-auto"
---

<div
	class:list={[
		"pointer-events-none fixed left-0 right-0 top-20 z-50 flex w-full translate-y-4 items-center justify-center p-4 opacity-0 transition lg:hidden",
		activeClass,
	]}
	id="menu"
>
	<div class="container h-full">
		<div
			class="flex h-full w-full items-center justify-center rounded-3xl bg-white/80 px-8 py-16 backdrop-blur-md dark:bg-dark/90"
		>
			<div class="flex flex-col gap-12">
				<Nav />
				<div class="ml-auto flex items-center gap-4">
					<LangSelector />
					<SwitchScheme />
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	document.addEventListener("astro:page-load", () => {
		const menu = document.querySelector("#menu")
		const buttonsMenu = document.querySelectorAll(".button-menu")

		menu?.classList.remove("active")

		buttonsMenu.forEach((button) => {
			button.classList.remove("active")
			button.addEventListener("click", () => {
				if (button.role === "button") {
					button.classList.toggle("active")
				}

				menu?.classList.toggle("active")
			})
		})
	})
</script>
